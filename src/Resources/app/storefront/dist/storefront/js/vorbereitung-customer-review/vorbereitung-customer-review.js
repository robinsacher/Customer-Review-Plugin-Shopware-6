(()=>{"use strict";var e={857:e=>{var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==r},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?o(Array.isArray(e)?[]:{},e,t):e}function n(e,t,r){return e.concat(t).map(function(e){return i(e,r)})}function s(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function a(e,t){try{return t in e}catch(e){return!1}}function o(e,r,l){(l=l||{}).arrayMerge=l.arrayMerge||n,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=i;var c,u,h=Array.isArray(r);return h!==Array.isArray(e)?i(r,l):h?l.arrayMerge(e,r,l):(u={},(c=l).isMergeableObject(e)&&s(e).forEach(function(t){u[t]=i(e[t],c)}),s(r).forEach(function(t){(!a(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(a(e,t)&&c.isMergeableObject(r[t])?u[t]=(function(e,t){if(!t.customMerge)return o;var r=t.customMerge(e);return"function"==typeof r?r:o})(t,c)(e[t],r[t],c):u[t]=i(r[t],c))}),u)}o.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,r){return o(e,r,t)},{})},e.exports=o}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,r),s.exports}(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t}})(),(()=>{r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e=r(857),t=r.n(e);class i{static ucFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}static lcFirst(e){return e.charAt(0).toLowerCase()+e.slice(1)}static toDashCase(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(e,t){let r=i.toUpperCamelCase(e,t);return i.lcFirst(r)}static toUpperCamelCase(e,t){return t?e.split(t).map(e=>i.ucFirst(e.toLowerCase())).join(""):i.ucFirst(e.toLowerCase())}static parsePrimitive(e){try{return/^\d+(.|,)\d+$/.test(e)&&(e=e.replace(",",".")),JSON.parse(e)}catch(t){return e.toString()}}}class n{static isNode(e){return"object"==typeof e&&null!==e&&(e===document||e===window||e instanceof Node)}static hasAttribute(e,t){if(!n.isNode(e))throw Error("The element must be a valid HTML Node!");return"function"==typeof e.hasAttribute&&e.hasAttribute(t)}static getAttribute(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!1===n.hasAttribute(e,t))throw Error('The required property "'.concat(t,'" does not exist!'));if("function"!=typeof e.getAttribute){if(r)throw Error("This node doesn't support the getAttribute function!");return}return e.getAttribute(t)}static getDataAttribute(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=t.replace(/^data(|-)/,""),a=i.toLowerCamelCase(s,"-");if(!n.isNode(e)){if(r)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===e.dataset){if(r)throw Error("This node doesn't support the dataset attribute!");return}let o=e.dataset[a];if(void 0===o){if(r)throw Error('The required data attribute "'.concat(t,'" does not exist on ').concat(e,"!"));return o}return i.parsePrimitive(o)}static querySelector(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!n.isNode(e))throw Error("The parent node is not a valid HTML Node!");let i=e.querySelector(t)||!1;if(r&&!1===i)throw Error('The required element "'.concat(t,'" does not exist in parent node!'));return i}static querySelectorAll(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(r&&!n.isNode(e))throw Error("The parent node is not a valid HTML Node!");let i=e.querySelectorAll(t);if(0===i.length&&(i=!1),r&&!1===i)throw Error('At least one item of "'.concat(t,'" must exist in parent node!'));return i}static getFocusableElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return e.querySelectorAll('\n            input:not([tabindex^="-"]):not([disabled]):not([type="hidden"]),\n            select:not([tabindex^="-"]):not([disabled]),\n            textarea:not([tabindex^="-"]):not([disabled]),\n            button:not([tabindex^="-"]):not([disabled]),\n            a[href]:not([tabindex^="-"]):not([disabled]),\n            [tabindex]:not([tabindex^="-"]):not([disabled])\n        ')}static getFirstFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return this.getFocusableElements(e)[0]}static getLastFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=this.getFocusableElements(e);return t[t.length-1]}}class s{publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new CustomEvent(e,{detail:t,cancelable:r});return this.el.dispatchEvent(i),i}subscribe(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this,n=e.split("."),s=r.scope?t.bind(r.scope):t;if(r.once&&!0===r.once){let t=s;s=function(r){i.unsubscribe(e),t(r)}}return this.el.addEventListener(n[0],s),this.listeners.push({splitEventName:n,opts:r,cb:s}),!0}unsubscribe(e){let t=e.split(".");return this.listeners=this.listeners.reduce((e,r)=>([...r.splitEventName].sort().toString()===t.sort().toString()?this.el.removeEventListener(r.splitEventName[0],r.cb):e.push(r),e),[]),!0}reset(){return this.listeners.forEach(e=>{this.el.removeEventListener(e.splitEventName[0],e.cb)}),this.listeners=[],!0}get el(){return this._el}set el(e){this._el=e}get listeners(){return this._listeners}set listeners(e){this._listeners=e}constructor(e=document){this._el=e,e.$emitter=this,this._listeners=[]}}class a{init(){throw Error('The "init" method for the plugin "'.concat(this._pluginName,'" is not defined.'))}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(e){let r=i.toDashCase(this._pluginName),s=n.getDataAttribute(this.el,"data-".concat(r,"-config"),!1),a=n.getAttribute(this.el,"data-".concat(r,"-options"),!1),o=[this.constructor.options,this.options,e];s&&o.push(window.PluginConfigManager.get(this._pluginName,s));try{a&&o.push(JSON.parse(a))}catch(e){throw console.error(this.el),Error('The data attribute "data-'.concat(r,'-options" could not be parsed to json: ').concat(e.message))}return t().all(o.filter(e=>e instanceof Object&&!(e instanceof Array)).map(e=>e||{}))}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(e){return e||(e=this.constructor.name),e}constructor(e,t={},r=!1){if(!n.isNode(e))throw Error("There is no valid element given.");this.el=e,this.$emitter=new s(this.el),this._pluginName=this._getPluginName(r),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}}class o{bindEvents(){this.stars.forEach(e=>{e.addEventListener("click",()=>{let t=parseInt(e.dataset.value,10);t>=1&&(this.hiddenInput.value=t,this.paint(t))}),e.addEventListener("mouseenter",()=>{this.paint(e.dataset.value)}),e.addEventListener("mouseleave",()=>{this.paint(this.hiddenInput.value||0)})})}paint(e){this.stars.forEach(t=>{let r=+t.dataset.value<=+e;t.textContent=r?"★":"☆",t.classList.toggle("active",r)})}constructor(e,t){this.stars=Array.from(e.querySelectorAll(".star")),this.hiddenInput=t,this.paint(0),this.bindEvents()}}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new XMLHttpRequest;return i.open(e,t,!0),i.withCredentials=!0,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Accept","application/json"),r&&i.setRequestHeader("X-CSRF-TOKEN",r),i}class c{load(e){let t=l("GET",e);t.onreadystatechange=()=>{if(4===t.readyState&&200===t.status)try{let e=JSON.parse(t.responseText);if(!(null==e?void 0:e.success)||!Array.isArray(e.reviews))return;this.render(e.reviews)}catch(e){console.error("Fehler beim Parsen der Reviews:",e,t.responseText)}},t.send()}render(e){this.container.innerHTML='<ul class="reviews-list"></ul>';let t=this.container.querySelector(".reviews-list");if(!e||0===e.length){let e=document.createElement("li");e.textContent="Noch keine Bewertungen.",t.appendChild(e);return}e.forEach(e=>{let r=document.createElement("li");r.className="review-item";let i=document.createElement("div");i.className="review-stars";for(let t=1;t<=5;t++)i.appendChild(document.createTextNode(t<=(e.stars||0)?"★":"☆"));r.appendChild(i);let n=document.createElement("p");n.textContent=e.comment||"",r.appendChild(n),t.appendChild(r),t.appendChild(document.createElement("hr"))})}constructor(e){this.container=e}}class u{handleSubmit(e){e.preventDefault();let t=new FormData(this.form),r=function(){let e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null}();r&&t.append("_token",r);let i=l("POST",this.saveUrl,r);i.onload=()=>{try{JSON.parse(i.responseText).success&&(this.form.reset(),"function"==typeof this.onSuccess&&this.onSuccess())}catch(e){console.error("Fehler beim Absenden.")}},i.send(t)}constructor(e,t,r){this.form=e,this.saveUrl=t,this.onSuccess=r,this.form.addEventListener("submit",e=>this.handleSubmit(e))}}window.PluginManager.register("ReviewPlugin",class extends a{init(){this.form=this.el.querySelector("#review-form"),this.reviewsContainer=this.el.querySelector("#reviews"),this.commentField=this.el.querySelector("#rev-comment"),this.starContainer=this.el.querySelector("#star-rating"),this.hiddenInput=this.el.querySelector("#rev-stars"),this.form&&this.reviewsContainer&&this.starContainer&&(this.stars=new o(this.starContainer,this.hiddenInput),this.maxLength=parseInt(this.reviewsContainer.dataset.maxLength,10)||500,this.errorMessage=this.reviewsContainer.dataset.errorMessage||"Kommentar ist zu lang.",function(e,t,r){if(!e)return;let i=document.createElement("div");i.className="invalid-feedback",e.insertAdjacentElement("afterend",i),e.addEventListener("input",()=>{e.value.length>t?(e.classList.add("is-invalid"),i.textContent=r):(e.classList.remove("is-invalid"),i.textContent="")})}(this.commentField,this.maxLength,this.errorMessage),this.reviewList=new c(this.reviewsContainer),this.reviewPost=new u(this.form,this.reviewsContainer.dataset.saveUrl,()=>{this.stars.paint(0),this.reviewList.load(this.reviewsContainer.dataset.listUrl)}),this.reviewList.load(this.reviewsContainer.dataset.listUrl))}},"[data-review-plugin]")})()})();